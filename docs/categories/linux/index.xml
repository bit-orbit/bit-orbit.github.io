<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>linux on bit-orbit</title><link>https://bit-orbit.github.io/categories/linux/</link><description>Recent content in linux on bit-orbit</description><generator>Hugo -- gohugo.io</generator><language>fa</language><lastBuildDate>Fri, 09 Feb 2024 01:49:42 +0330</lastBuildDate><atom:link href="https://bit-orbit.github.io/categories/linux/index.xml" rel="self" type="application/rss+xml"/><item><title>Linux File Locking چیست؟</title><link>https://bit-orbit.github.io/p/linux-file-locking-%DA%86%DB%8C%D8%B3%D8%AA/</link><pubDate>Fri, 09 Feb 2024 01:49:42 +0330</pubDate><guid>https://bit-orbit.github.io/p/linux-file-locking-%DA%86%DB%8C%D8%B3%D8%AA/</guid><description>&lt;img src="https://bit-orbit.github.io/images/post/flilock.jpeg" alt="Featured image of post Linux File Locking چیست؟" />&lt;p>بیایید قبل از اینکه راه حل را ببینیم، اول مشکل را دقیق تر برسی کنیم.
به این فکر کنید که شما یک فایلی دارید که شامل یک عدد است که اشاره می‌کند به مقدار
اعتباری که کاربر در حسابش دارد. حالا اگر قرار باشد یک پورسه اون مقدار را بر اساس ارائه
سرویسی، از حساب کاربر کم کند، و پروسه دیگری به دلیل افزایش اعتبار، مقداری را به حساب
کاربر اضافه کند، چه مشکلاتی اتفاق می‌افتد؟&lt;/p>
&lt;p>برای اینکه دقیق تر بشیم، این روند رو باهم پیش می‌بریم.
فرض کنید فایلی به اسم
amount.txt
مقدار 100 داخلش نوشته شده است. و دو پروسه کم و اضافه کردن را اجرا می‌کنیم.
توی این مثال،‌ ما می‌خواهیم مقدار 20 از حساب کاربر کم و مقدار 50 به حساب کاربر
اضافه کنیم، پس ما انتظار داریم در انتها فایل ما مقدار 130 را درونش ذخیره کرده باشد.&lt;/p>
&lt;ul>
&lt;li>پروسه اول فایل را می‌خواند و مقدار 100 را در حاظه‌اش نگه می‌دارد&lt;/li>
&lt;li>پروسه دوم فایل را می‌خواند و مقدار 100 را در حاظه‌اش نگه می‌دارد&lt;/li>
&lt;li>پروسه اول مقدار 20 را از 100 کم می‌کند و مقدار 80 را در حافظه ذخیره می‌کند&lt;/li>
&lt;li>پروسه دوم مقدار 50 را به 100 اضافه می‌کند و مقدار 150 را در حافظه ذخیره می‌کند&lt;/li>
&lt;li>پروسه اول مقدار 80 را در فایل ذخیره می‌کند&lt;/li>
&lt;li>پروسه دوم مقدار 150 را در فایل ذخیره می‌کند&lt;/li>
&lt;/ul>
&lt;p>همینطور که همه ما انتظار داشتیم، ما باید در این فایل مقدار 130 را ذخیره می‌کردیم،
اما پروسه های ما به دلیل اینکه هیچ همکاری و یا هیچ مکانیزمی دیگری ندارند که این مقدار ها را
به یکدیگر اطلاع دهند، مشکل
&lt;a class="link" href="https://en.wikipedia.org/wiki/Race_condition#Software" target="_blank" rel="noopener"
>Race condition&lt;/a>
رخ می‌دهد.&lt;/p>
&lt;p>یکی از راه حل های این مشکل
lock
کردن فایل توسط هر پروسه است، که به این کار
file locking
گفته می‌شود.&lt;/p>
&lt;p>&lt;strong>file locking&lt;/strong>
یک مکانیزم برای کنترل دسترسی چندین پروسه به یک فایل است.&lt;/p>
&lt;blockquote>
&lt;p>توی لینوکس یکی از دستورات خطرناکی که داریم دستور
sudo rm -rf /
است. وقتی این دستور را اجرا کنیم کل فایل های لینوکس ما حذف می‌شود.
دلیل اینکار این است که لینوکس به صورت پیشفرض فایل های باز شده را
lock
نمی‌کند.&lt;/p>
&lt;/blockquote>
&lt;p>با اینحال لینوکس دو مکانیزم مختلف
&lt;em>advisory&lt;/em> و &lt;em>mandatory&lt;/em>
را پشتیبانی می‌کند.&lt;/p>
&lt;blockquote>
&lt;p>توی این پست بیشتر تمرکز من روی مکانیزم
advisory locking(مشورتی)
است.&lt;/p>
&lt;/blockquote>
&lt;p>این روش به این شکل عمل می‌کند که هیچ پروسه‌ای مجبور به اجرای این روش نیست و اگر حتی
فایل توسط یک پروسه‌ای
lock
شده باشد، باز هم پروسه های دیگر می‌توانند به
lock
بودن فایل اهمیت ندهند و مقدار آن را تغییر دهند. این اتفاق به این دلیل می‌افتد که
advisory lock
توسط سیستم عامل و یا فایل سیستم انجام نمی‌شود.&lt;/p>
&lt;p>خب بیایید با یک مثال این فرایند را برسی کنیم. مثل مثال قبلی فرض کنید ما مقدار 100
را داخل فایل
amount.txt
داریم و می‌خواهیم مقدار 20 از آن کم و مقدار 50 به آن اضافه کنیم.&lt;/p>
&lt;ul>
&lt;li>پروسه اول قبل از خواندن فایل، فایل را لاک می‌کند&lt;/li>
&lt;li>پروسه دوم برای لاک کردن فایل اقدام می‌کند و از جایی که پروسه اول از پیش فایل را لاک کرده است، برای آزاد شدن لاک صبر می‌کند&lt;/li>
&lt;li>پروسه اول مقدار 20 را از 100 کم می‌کند و مقدار 80 را درون فایل می‌نویسد&lt;/li>
&lt;li>پروسه اول لاک فایل را آزاد می‌کند.&lt;/li>
&lt;li>پروسه دوم فایل را لاک و مقدار جدید 80 را از فایل می‌خواند&lt;/li>
&lt;li>پروسه دوم مقدار 50 را به 80 اضافه و مقدار 120 را درون فایل می‌نویسد&lt;/li>
&lt;li>پروسه دوم لاک فایل را آزاد می‌کند تا پروسه های دیگر بتوانند با فایل کار کنند.&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>اگر شما می‌خواهید این مکانیزم را روی یک فایل اجرا کنید، دستور
flock
برای شما اینکار را خواهد کرد.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">flock &lt;span class="o">[&lt;/span>options&lt;span class="o">]&lt;/span> file&lt;span class="p">|&lt;/span>directory &lt;span class="nb">command&lt;/span> &lt;span class="o">[&lt;/span>arguments&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>این کامند در حالت عادی از شما یک فایل و یک دستور خواهد گرفت و مکانیزم
advisory lock
را روی ان فایل اجرا خواهد کرد.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">flock /tmp/fli &lt;span class="nb">echo&lt;/span> 12&amp;gt;/tmp/fli
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>برای اینکه روند را بهتر درک کنیم یک فایل
bash
می‌نویسیم که بتوانیم مثال اولیه را روی آن اجرا کنیم.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="nv">file&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;balance.dat&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">value&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>cat &lt;span class="nv">$file&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Read current balance:&lt;/span>&lt;span class="nv">$value&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#sleep 10 seconds to simulate business calculation&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">progress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$progress&lt;/span> -lt &lt;span class="m">101&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> -n -e &lt;span class="s2">&amp;#34;\033[77DCalculating new balance..&lt;/span>&lt;span class="nv">$progress&lt;/span>&lt;span class="s2">%&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sleep &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">progress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$((&lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="o">+&lt;/span>progress&lt;span class="k">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">value&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$((&lt;/span>value+&lt;span class="nv">$1&lt;/span>&lt;span class="k">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Write new balance (&lt;/span>&lt;span class="nv">$value&lt;/span>&lt;span class="s2">) back to &lt;/span>&lt;span class="nv">$file&lt;/span>&lt;span class="s2">.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$value&lt;/span> &amp;gt; &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$file&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Done.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ما این فایل را همزمان با دو ترمینال اجرا می‌کنیم.&lt;/p>
&lt;p>&lt;img src="https://bit-orbit.github.io/images/post/advisory_lock.gif"
loading="lazy"
alt="advisory lock"
>&lt;/p>
&lt;p>همینطور که می‌بینید پروسه دوم برای اینکه محتوای فایل را تغییر دهد، باید صبر کند تا لاک فایل
آزاد شود.&lt;/p>
&lt;hr>
&lt;p>این پست خلاصه‌ای بود از
&lt;a class="link" href="https://www.baeldung.com/linux/file-locking" target="_blank" rel="noopener"
>این بلاگ&lt;/a>
که هر دو نوع
advisory lock و mandatory lock
را توضیح می‌دهد.&lt;/p>
&lt;p>برای من سوال بود که من چطور می‌توانم مکانیزمی که
flock
استفاده می‌کند را در برنامه های خودم پیاده سازی کنم، و خب نتیجه این بود که معمولا برای
advisory lock
هر زبانی یک کتابخانه استاندار دارد
توی
&lt;a class="link" href="https://docs.python.org/3/library/fcntl.html" target="_blank" rel="noopener"
>پایتون کتابخانه&lt;/a>
&lt;code>fcntl&lt;/code>
اینکار را انجام می‌دهد.&lt;/p></description></item><item><title>فورک بمب چیست و چطور کار می‌کند؟</title><link>https://bit-orbit.github.io/p/%D9%81%D9%88%D8%B1%DA%A9-%D8%A8%D9%85%D8%A8-%DA%86%DB%8C%D8%B3%D8%AA-%D9%88-%DA%86%D8%B7%D9%88%D8%B1-%DA%A9%D8%A7%D8%B1-%D9%85%DB%8C%DA%A9%D9%86%D8%AF/</link><pubDate>Wed, 27 Dec 2023 16:39:27 +0330</pubDate><guid>https://bit-orbit.github.io/p/%D9%81%D9%88%D8%B1%DA%A9-%D8%A8%D9%85%D8%A8-%DA%86%DB%8C%D8%B3%D8%AA-%D9%88-%DA%86%D8%B7%D9%88%D8%B1-%DA%A9%D8%A7%D8%B1-%D9%85%DB%8C%DA%A9%D9%86%D8%AF/</guid><description>&lt;img src="https://bit-orbit.github.io/images/post/fork_bomb.jpg" alt="Featured image of post فورک بمب چیست و چطور کار می‌کند؟" />&lt;p>اوایل که لینوکس نصب کرده بودم کامند هایی که توی
فروم های مختلف می‌دیدم و برای من جدید بود
را دوست داشتم یاد بگیرم و بدانم
کار آنها چی هست، برای همین هر کامندی را که می‌دیدم در
اولین
فرصت داخل سیستم خودم اجرا می‌کردم. که خب کور کورانه اجرای
هر کامندی اشتباهه بود. یکی از این کامند ها که اجرا کرده
بودم، به اسم فورک بمب
(fork bomb)
شناخته می‌شود. کامند به این صورت هست&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">:&lt;span class="o">(){&lt;/span> :&lt;span class="p">|&lt;/span>:&lt;span class="p">&amp;amp;&lt;/span> &lt;span class="o">}&lt;/span>&lt;span class="p">;&lt;/span>:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>اگر این کامند را اجرا کنید(امیدوارم تا الان نکرده باشید) تقریبا زیر یک دقیقه سیستم شما
هنگ می‌کند و مجبور می‌شوید سیستم را ریبوت کنید.&lt;/p>
&lt;hr>
&lt;p>توی این پست ساختار این کامند را تشریح می‌کنم و باهم
کمی
bash
یاد می‌گیریم.&lt;/p>
&lt;p>بیایید اول با مفهوم
recustion
آشنا بشیم، زمانی که یک قطعه کد خودش اجرا کند،
recusion
می‌گویم. مثلا شما یک فانکشن می‌نویسید به اسم
&lt;em>fn&lt;/em>
و توی بدنه فانکشن فقط خود همین فانکشن را صدا می‌‌کنید،
به این کار
call recursion
گفته می‌شود. فورک بمب دقیقا همین کار را می‌کند. به این
معنی که خودش را دائم اجرا می‌کند!&lt;/p>
&lt;p>به این فکر کنید که وقتی یک پراسس خودش را اجرا می‌کند
،مجدد پراسس های اجرا شده توسط اون هم دائم خودشان را اجرا
می‌کنند،
و دوباره هر پروسه‌ای که اجرا می‌شود بازم خودش را اجرا
می‌کند و این روند تا زمانی که رم و پردازنده سیستم تحمل
داشته باشد ادامه دارد.&lt;/p>
&lt;blockquote>
&lt;p>درختی که می‌بینید را اجرای فورک بمب درنظر بگیرید،
هر ستاره یک پروسه جدید است که توسط پروسه قبلی اجرا شده،
و خودش هم دو پروسه جدید باز می‌کند و هر یک از پروسه ها
هم همین روند را ادامه می‌دهند.&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">├──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w">   &lt;/span>&lt;span class="err">├──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">├──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">├──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">├──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">└──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">└──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">├──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">└──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">└──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">└──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">├──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">├──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">└──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">└──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">├──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">└──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w">   &lt;/span>&lt;span class="err">└──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">├──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">├──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">├──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">└──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">└──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">├──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">└──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">└──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">└──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">├──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">├──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">└──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">└──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">├──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">│&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">└──&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>من برای اینکه سیستم‌ خودم هنگ نکند فورک بمب را روی داکر
اجرا کردم و خب حتی یک ثانیه هم طول نکشید و آن کانتینر
کاملا هنگ کرد.&lt;/p>
&lt;blockquote>
&lt;p>قبل از اجرا
&lt;a class="link" href="https://bit-orbit.github.io/images/post/forkbomb_docker0.jpg" >&lt;img src="https://bit-orbit.github.io/images/post/forkbomb_docker0.jpg"
loading="lazy"
alt="forkbomb on docker"
>&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>زمان اجرا
&lt;a class="link" href="https://bit-orbit.github.io/images/post/forkbomb_docker.jpg" >&lt;img src="https://bit-orbit.github.io/images/post/forkbomb_docker.jpg"
loading="lazy"
alt="forkbomb on docker"
>&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;p>بیایید وارد کد بشیم، این علامت ها و کاراکتر ها چی هستند؟&lt;/p>
&lt;!-- برای تعریف یک فانکشن توی
bash
ما به این صورت عمل می‌کنیم که اول اسم فانکشن بعد پرانتز
و بعد کرلی براکت(توی فارسی می‌گیم آکولاد) و داخل کرلی
براکت ما قطعه کد را می‌نویسیم. مثلا برای فانکشنی که یک
اسم را روی صفحه چاپ کنه به این صورت عمل می‌کنیم
```bash
pname(){ echo 'foo'; }
``` -->
&lt;p>اگه دقت کنید اولین کاراکتر فورک بمب، علامت
&lt;code>:&lt;/code>
است. این علامت اسم فانکشن ما است. برخلاف قانون تعریف نام
برای متغییر ها توی
bash،
می‌توانیم از کاراتر های یونیکد هم برای تعریف نام فانکشن
استفاده کنیم، مثلا یک
کاراکتر چینی یا حتی ایموجی!&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">雨&lt;span class="o">(){&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;rain&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">❤️&lt;span class="o">(){&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;love&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>خب در ادامه علامت های
&lt;code>()&lt;/code>
را می‌بینیم، توی
bash
برای تعریف فانکشن قبل از اسم فانکشن هیچ کلمه کلیدی مثل
fn, def, void
و &amp;hellip; نیاز نیست، فقط بجای آن باید
&lt;strong>بعد از اسم فانکشن&lt;/strong>
پرانتز ها را بگذارید.&lt;/p>
&lt;p>مثل خیلی از زبان های برنامه نویسی، بدنه فانکشن توی
کرلی براکت تعریف می‌شود.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">:&lt;span class="o">(){}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>پس تا اینجا ما یک فانکشن ساده با نام
&lt;code>:&lt;/code>
تعریف کردیم.&lt;/p>
&lt;p>داخل بدنه این فانکشن، اسمی که برای فانکشن قرار دادیم
همان
&lt;code>:&lt;/code>
را می‌نویسیم. با اینکار دقیقا
call recursion
را انجام دادیم، و باعث شدیم که برنامه خودش را
توی هر اجرا مجدد اجرا کند.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">:&lt;span class="o">(){&lt;/span> : &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>دقت کنید توی سینتکس
bash
حتما باید یک فاصله برای کدی که داخلی کرلی براکت می‌نویسم قرار بدیم&lt;/p>
&lt;/blockquote>
&lt;p>علامت
&lt;code>|&lt;/code>
به اسم پایپ شناخته می‌شود، وظیفه این علامت
دادن خروجی یک کامند بعنوان ورودی به یک کامند دیگر هست،
حلا
دقت کنید که ما خروجی اجرای
&lt;code>:&lt;/code>
را به خودش می‌دهیم. دقیقا به این شکل&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">:&lt;span class="o">(){&lt;/span> :&lt;span class="p">|&lt;/span>: &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>با این علامت هر پروسه دو بار پروسه جدیدی از خودش می‌سازد
اگر از این علامت استفاده نکنیم، پروسه ما به صورت خطی خودش
را اجرا خواهد کرد، اینطوری کد ما با یک حلقه
&lt;code>while&lt;/code>
تفاوتی زیادی نخواهد داشت.&lt;/p>
&lt;p>علامت
&lt;code>&amp;amp;&lt;/code>
اجرای یک کامند را به بکگراند(پس زمینه) می‌برد.
برای مثال بعد از اجرای یک دستور باید صبر کنید پروسه
آن تمام شود تا بتوانید دستور بعدی را اجرا کنید.
ولی اگر از علامت
&lt;code>&amp;amp;&lt;/code>
بعد از هر دستور استفاده کنید، دیگر نیاز نیست
صبر کنید تا روند اجرای آن برنامه تمام شود.
درواقع با علامت
&lt;code>&amp;amp;&lt;/code>
شما می‌توانید
هر برنامه را در بکگراند اجرا کنید. حالا توی فورک بمب
این علامت باعث می‌شود تا فانشکنی که اجرا کردین درحالی که کارش به اتمام
نرسیده است، فانکشن بعدی اجرا بشود.&lt;/p>
&lt;p>&lt;img src="https://bit-orbit.github.io/images/post/forkbomb_and.jpg"
loading="lazy"
alt="&amp; in bash"
>&lt;/p>
&lt;p>و بعد علامت
&lt;code>;&lt;/code>
را می‌بینیم. این علامت کامند ها را از هم جدا می‌کند.
مثلا شما می‌توانید چند کامند مختلف را توی یک خط بنویسید.
توی فورک بمب این علامت فانکشنی که تعریف کردین را از
دستور بعدی(که اجرا کننده اون فانکشن هست)جدا می‌کند.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;foo&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;bar&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;baz&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>آخرین علامتی که توی فورک بمب داریم همون علامت
&lt;code>:&lt;/code>
یا همون اسمی هست که برای فانکشن قرار دادیم.
خیلی ساده توی
bash
برای اجرای یک فانکشن فقط اسم‌ش را می‌نویسیم.&lt;/p>
&lt;p>و تمام! ما یاد گرفتیم چطور فورک بمب رو بنویسیم و دیگه
نیاز نیست حفظ‌ش کنیم :)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">:&lt;span class="o">(){&lt;/span> :&lt;span class="p">|&lt;/span>:&lt;span class="p">&amp;amp;&lt;/span> &lt;span class="o">}&lt;/span>&lt;span class="p">;&lt;/span>:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title> در لینوکس چیست؟ TTY</title><link>https://bit-orbit.github.io/p/%D8%AF%D8%B1-%D9%84%DB%8C%D9%86%D9%88%DA%A9%D8%B3-%DA%86%DB%8C%D8%B3%D8%AA-tty/</link><pubDate>Mon, 31 Jan 2022 19:57:05 +0330</pubDate><guid>https://bit-orbit.github.io/p/%D8%AF%D8%B1-%D9%84%DB%8C%D9%86%D9%88%DA%A9%D8%B3-%DA%86%DB%8C%D8%B3%D8%AA-tty/</guid><description>&lt;img src="https://bit-orbit.github.io/images/post/tty.jpg" alt="Featured image of post در لینوکس چیست؟ TTY " />&lt;div dir='rtl' style='font-size:x-large'>
&lt;p>شما باید درباره اصطلاح
tty
زمانی که به لینوکس و یونیکس آمد، شنیده باشید. اما
tty
چیست؟&lt;/p>
&lt;p>آیا برای شما به عنوان یک کاربر دستکتاپ مفید است؟&lt;/p>
&lt;p>به آن نیاز دارید؟ می‌توانید با آن چه کار کنید؟&lt;/p>
&lt;p>اجازه دهید هر چیز ضروری برای آشنا کردن شما با اصطلاح
tty
را در این پست برسی کنیم.&lt;/p>
&lt;p>به یاد داشته باشید که پاسخ قطعی برای این سوال وجود ندارد،
اما به نحوه تعامل دستگاه های
input/output(ورودی/خروجی)
در گذشته ربط دارد.&lt;/p>
&lt;p>برای اینکه تصویری شفاف از آن داشته باشید باید کمی از تاریخ‌ش را بدانید.&lt;/p>
&lt;h3 id="تاریخ-پشت-اصطلاح-tty">تاریخ پشت اصطلاح tty&lt;/h3>
&lt;p>همه چیز از یک
&lt;em>teleprinter&lt;/em>
در سال 1830 شروع شد.&lt;/p>
&lt;p>teleprinter
به شما اجازه می‌داد که از طریق سیم پیام ارسال و دریافت کنید.
teleprinter
جایگزینی برای ارطبات مورس کد بود در آن دو اپراتور برای ارطبات با یکدیگر مود نیاز بود. اما در
teleprinter
فقط به یک اپراتور برای ارسال پیام نیاز داشت. درحالی که
teleprinter
یک صفحه کلید مدرن نداشت، بعد ها سیستم آن توسط
Donald Murray
به یک صفحه کلید
&lt;em>teletypewriter&lt;/em>
تکامل یافت.&lt;/p>
&lt;p>Murray
زحمت اپراتور ها را برای
ارسال و پیام را کاهش داد و این امکان را برای
teletypeprinter
فراهم کرد که به عنوان یک
teletypewriter
تجاری در سال 1908 بیرون بیاید.
tty
نام کوتاه شده
teletypewrite
است.&lt;/p>
&lt;p>&lt;img src="https://bit-orbit.github.io/images/post/teletypewrite.jpg"
loading="lazy"
>&lt;/p>
&lt;p>تفاوت بین
teletypewrite
و
typewriter
های معمولی این بود که
teletypewrite
به یک دستگاه ارطباتی برای ارسال پیام نوشته شده متصل بود.
teletypewriter
ارطبات سریع تری را تا اکنون برای انسال بدون استفاده از کامپیوتر مقدور کرده است.
و اینجا جایی است که
tty
بوجود آمد.&lt;/p>
&lt;h3 id="مفهوم-مدرن">مفهوم مدرن&lt;/h3>
&lt;p>اکنون شما باید متعجب شده باشید که چطور
tty
به لینوکس و کامپیوتر مدرن آمده است.&lt;/p>
&lt;p>بسیار خب، برای شروع، زمانی که
teletypewriter
به بازار رسید، چند سال بعد ترانزیستور های نیمه هادی(نیمه رسانا) توسعه داده شد که به
میکروپروسسور(micro proccessor)
هایی تبدیل شدند که کامپیوتر را ممکن می‌کرند.&lt;/p>
&lt;p>کامپیوتر های اولیه مفهومی به اسم صفحه کلید نداشتند.
&lt;a class="link" href="https://en.wikipedia.org/wiki/Punched_card" target="_blank" rel="noopener"
>کارت های پانج&lt;/a>
روش ورودی دادن به کامپیوتر ها بود&lt;/p>
&lt;p>&lt;img src="https://bit-orbit.github.io/images/post/punch-card.jpg"
loading="lazy"
alt="card-punch"
>&lt;/p>
&lt;p>درحالی که کامپیوتر ها توسعه پیدا می‌کردند، بالاخره کارت های پانچ با
teletypewriter
به عنوان دستگاه &lt;em>&lt;strong>&lt;u>ورودی/خروجی&lt;/u>&lt;/strong>&lt;/em> مناسب جایگزین شد.    &lt;/p>
&lt;p>&lt;img src="https://bit-orbit.github.io/images/post/pc-tty.jpg"
loading="lazy"
alt="LGP-30 computer in 1956 with a TTY attached to it"
>&lt;/p>
&lt;p>با توسعه تکنولوژی
teletypewriter
ها با استفاده از الکترونیک مجازی شدند. پس شما به یک
tty
فیزیکی، مکانیکی نیاز پیدا نمی‌کنید، بلکه به یک
tty
مجازی، الکترونیکی نیاز دارید.&lt;/p>
&lt;p>اوایل کامپیوتر ها صفحه نمایش هم نداشتند. چیز ها بجای نمایش داده شدن بروی صفحه نمایش
(که وجود نداشت)
به روی کاغذ چاپ می‌شدند. به همین دلیل شما بجای دیدن اصطلاح
&lt;code>display&lt;/code>
اصطلاح
&lt;code>print&lt;/code>
را می‌بینید.
ویدیو ها به عنوان تکنولوژی پیشرفته به ترمینال(پایانه) ها اضافه شد.
به عبارت دیگر شما باید درباره ترمینال های ویدیویی شنیده باشید. یا شما می‌توانید
آن ها را ترمینال های فیزیکی بنامید.&lt;/p>
&lt;p>سپس اینها به ترمینال های نرم افزاری شبیه سازی شده تکامل پیدا کردند که با قابلیت ها و
ویژگی های تسوسعه یافته‌ای همرا بود. این چیزی است که شما آن را
terminal emulator
می‌نامید.&lt;/p>
&lt;p>برای نمونه ترمینال
&lt;a class="link" href="https://en.wikipedia.org/wiki/GNOME_Terminal" target="_blank" rel="noopener"
>گنوم
(Gnome)&lt;/a>
یا
&lt;a class="link" href="https://konsole.kde.org/" target="_blank" rel="noopener"
>کنسول
(Konsole)&lt;/a>
&lt;a class="link" href="https://itsfoss.com/linux-terminal-emulators/" target="_blank" rel="noopener"
>چنتا از بهترین ترمینال هایی هستند که می‌توانید برای لینوکس پیدا کنید.&lt;/a>&lt;/p>
&lt;h3 id="بسیارخب-tty-در-لینوکس-چیست">بسیارخب tty در لینوکس چیست؟&lt;/h3>
&lt;p>زمانی که
tty
به لینوکس و یونیکس آمد، یک دستگاه مستقل در یونیکس و لینوکس بود گاهی
tty
به یک دستگاه ورودی فیزیکی مانند
serial port(درگاه سریال)
اشاره می‌کرد، و گاهی به ترمینال های مجازی اشاره می‌کرد که به کاربران اجازه تعامل با
سیستم را می‌داد.&lt;/p>
&lt;p>tty
یک زیر سیستم در لینوکس و یونیکس است که مدریت فرایند، ویرایش خط و
مدیریت نشست ها را در سطح کرنل از طریق درایور های
tty
ممکن می‌کند.&lt;/p>
&lt;p>از دیدگاه برنامه نویسی شما باید در این موضوع عمیق تر شوید. اما محدوده این
پست را در نظر بگیرید، این مقاله باید یک توضیح ساده برای درک بهتر باشد.
در حقیقت، هر گاه یک ترمینال را باز می‌کنیم یا هر نوع
shell
دیگیری را در سیستمتان استفاده کنید، آن
shell
با
tty
مجازی که
&lt;em>PTY&lt;/em>
یا
&lt;em>pseudo-tty&lt;/em>
هم شناخته می‌شوند، تعامل خواهد داشت.&lt;/p>
&lt;p>شما می‌توانید
tty
را در ترمینال تایپ کنید و
pty
مرتبط را پیدا کنید.&lt;/p>
&lt;h3 id="چگونه-به-tty-در-لینوکس-دسترسی-داشته-باشیم">چگونه به tty در لینوکس دسترسی داشته باشیم؟&lt;/h3>
&lt;p>&lt;img src="https://bit-orbit.github.io/images/post/ubuntu-tty.png"
loading="lazy"
alt="tty-in-ubuntu"
>&lt;/p>
&lt;p>دسترسی به
tty
در لینوکس ساده است. در حقیت زمانی که هیچ سرنخی از اینکه
tty
چیست نداشتم، به طور اتفاقی به آن دسترسی پیدا کردم و از اینکه چطوری باید
از آن خارج شوم وحشت زده شدم!&lt;/p>
&lt;p>شما می‌توانید با کلید های میانبر زیر در اکثر توزیع های لینوکس به صفحه
tty
دسترسی پیدا کنید.&lt;/p>
&lt;p>&lt;code>CTRL&lt;/code> + &lt;code>ALT&lt;/code> + &lt;code>F1&lt;/code> – &lt;strong>Lockscreen&lt;/strong>&lt;/p>
&lt;p>&lt;code>CTRL&lt;/code> + &lt;code>ALT&lt;/code> + &lt;code>F2&lt;/code> – &lt;strong>Desktop Environment&lt;/strong>&lt;/p>
&lt;p>&lt;code>CTRL&lt;/code> + &lt;code>ALT&lt;/code> + &lt;code>F3&lt;/code> – &lt;strong>TTY3&lt;/strong>&lt;/p>
&lt;p>&lt;code>CTRL&lt;/code> + &lt;code>ALT&lt;/code> + &lt;code>F4&lt;/code> – &lt;strong>TTY4&lt;/strong>&lt;/p>
&lt;p>&lt;code>CTRL&lt;/code> + &lt;code>ALT&lt;/code> + &lt;code>F5&lt;/code> – &lt;strong>TT5&lt;/strong>&lt;/p>
&lt;p>&lt;code>CTRL&lt;/code> + &lt;code>ALT&lt;/code> + &lt;code>F6&lt;/code> – &lt;strong>TTY6&lt;/strong>&lt;/p>
&lt;p>شما می‌توانید حد اکثر به
&lt;u>6&lt;/u>
tty
دسترسی داشته باشید، با این حال دو تا از اولین کلید های میانبر به صفحه قفل
و محیط دسکتاپ اشاره دارد.&lt;/p>
&lt;p>&lt;img src="https://bit-orbit.github.io/images/post/ubuntu-tty4.png"
loading="lazy"
alt="cmd-with-tty"
>&lt;/p>
&lt;p>بنابر این، با باقی کلید های میانبر شما به محیط
command-line
دسترسی می‌گیرید.&lt;/p>
&lt;h3 id="چه-زمانی-شما-از-tty-در-لینوکس-استفاده-خواهید-کرد">چه زمانی شما از tty در لینوکس استفاده خواهید کرد؟&lt;/h3>
&lt;p>tty
فقط یک گنج تکنیکی نیست. حتی برای کاربرانی مثل من که توسعه دهنده هم نیستند مفید است.&lt;/p>
&lt;p>زمانی که محیط گرافیکی فریز می‌شود باید به کار بیاید. در بعضی از مواقع
نصب مجدد محیط گرافیکی با استفاده از
tty
می‌تواند مشکل را حل کند.&lt;/p>
&lt;p>یا شما می‌توانید
tty
را برای انجام کار هایی مثل آپدیت انتخاب کنید جایی که شما نمی‌خواهید مشکلات بصری فرایند
های شما را مختل کند.&lt;/p>
&lt;p>بد ترین مورد سناریو، شما می‌تواند زمانی که محیط دستکتاپ جواب نمی‌دهد، برای ریبوت
به
tty
مراجعه کنید.&lt;/p>
&lt;p>بعضی از کاربران ترجیح می‌دهند که فایل های بزرگ را با
tty
منتقل کنند(من از آنها نیستم)&lt;/p>
&lt;h3 id="tty-به-عنوان-یک-دستور-در-لینوکس">tty به عنوان یک دستور در لینوکس&lt;/h3>
&lt;p>&lt;img src="https://bit-orbit.github.io/images/post/tty-cmd.png"
loading="lazy"
alt="tty-cmd"
>&lt;/p>
&lt;p>همانطور که در صفحه راهنمای
(man page)
tty
توضیح داده شده است، زمانی که شما
tty
را در ترمینال تایپ کنید، نام فایل ترمینال که به وردی استاندارد متصل است را چاپ می‌کند.&lt;/p>
&lt;p>به عبارت دیگر برای دانستن عدد
tty
که به آن متصل هستید، فقط
tty
را در ترمینال تایپ کنید.
اگر چند کاربر از راه دور به سیستم لینوکس متصل هستند، می‌توانید برای برسی اینکه به
چه متصل هستند از کامند
&lt;code>who&lt;/code>
استفاده کنید.&lt;/p>
&lt;h3 id="خارج-از-ترجمه">خارج از ترجمه&lt;/h3>
&lt;p>متن ترجمه شده بود و خب من یک مترجم تخصصی نیستم، من یک برنامه نویسم که بلاگ نویسی
و ترجمه رو هم دوست دارم، سعی کردم به بهترین نحو متن را ترجمه کنم
و در اختیار بقیه بذارم، اگر حس کردین جایی از متن مشکلی داره، خیلی خوشحال می‌شوم
که مشکلم رو بهم بیگید، این کمک بزرگیه.&lt;/p>
&lt;p>متن اصلی رو می‌توانید از
&lt;a class="link" href="https://itsfoss.com/what-is-tty-in-linux/" target="_blank" rel="noopener"
>این لینک&lt;/a>
بخوانید.&lt;/p>
&lt;/div></description></item></channel></rss>